import{i as o}from"./chunk-GN6HPVTV.js";o();var n=class{constructor(e){this.dataDir=e}async syncToFs(e){}async initialSyncFs(e){}};o();o();var l=class extends n{async emscriptenOpts(e){return{...e,preRun:[...e.preRun||[],t=>{let r=t.FS.filesystems.IDBFS;t.FS.mkdir("/pglite"),t.FS.mkdir(`/pglite/${this.dataDir}`),t.FS.mount(r,{},`/pglite/${this.dataDir}`),t.FS.symlink(`/pglite/${this.dataDir}`,p)}]}}initialSyncFs(e){return new Promise((i,t)=>{e.syncfs(!0,r=>{r?t(r):i()})})}syncToFs(e){return new Promise((i,t)=>{e.syncfs(!1,r=>{r?t(r):i()})})}};o();var f=class extends n{async emscriptenOpts(e){return{...e,preRun:[t=>{let r=t.FS.filesystems.PGFS;t.FS.mkdir(p),t.FS.mount(r,{autoPersist:!1},`/tmp/pglite/${this.dataDir}`)}]}}initialSyncFs(e){return new Promise((i,t)=>{e.syncfs(!0,r=>{r?t(r):i()})})}syncToFs(e){return new Promise((i,t)=>{e.syncfs(!1,r=>{r?t(r):i()})})}};o();var y=class extends n{async emscriptenOpts(e){return e}};var c="/tmp/pglite",p="WASM_PREFIX/base";function a(s){if(!s||s.length<=1)throw new Error("Invalid dataDir, only a namespace required for pgfs and not a path");return s=s.split("/").pop(),p=c+"/"+s,s}function I(s){let e;if(s?.startsWith("file://")){if(s=s.slice(7),!s)throw new Error("Invalid dataDir, must be a valid path");e="nodefs"}else s?.startsWith("pg://")?(s=a(s.slice(5)),e="pgfs"):s?.startsWith("idb://")?(s=a(s.slice(6)),e="idbfs"):!s||s?.startsWith("memory://")?e="memoryfs":e="nodefs";return{dataDir:s,fsType:e}}async function O(s,e){if(s&&e==="nodefs"){let{NodeFS:i}=await import("./nodefs-M4CHUJ2B.js");return new i(s)}else return s&&e==="idbfs"?new l(s):s&&e==="pgfs"?new f(s):new y}export{n as a,c as b,p as c,I as d,O as e};
//# sourceMappingURL=chunk-BCB573L6.js.map